Day 9: Mastering Foreign Key Constraints1. Whatâ€™s Wrong With Our Foreign Keys?Without explicit Foreign Key Constraints, a database is just a collection of isolated tables. If we rely solely on "naming conventions" (like having a user_id in an orders table), several issues arise:Orphaned Records: You can delete a user while their orders still exist, leaving data that points to "nowhere."Invalid Data: You could insert an order for a user_id that doesn't actually exist in the users table.Data Inconsistency: There is no "source of truth" enforcing the relationship between tables.2. Introducing Foreign Key ConstraintsA Foreign Key (FK) is a column (or group of columns) in one table that provides a link between data in two tables. It acts as a cross-reference.Key Benefits:Referential Integrity: Ensures that the relationship between tables remains consistent.Validation: MySQL will prevent any action that would destroy the link between these tables.3. Diving Deeper Into Foreign Key ConstraintsWhen you define a constraint, you are telling the database: "This column must contain a value that already exists in the Primary Key column of the parent table."Syntax Example:SQLCREATE TABLE orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_date DATE,
    amount DECIMAL(8,2),
    customer_id INT,
    FOREIGN KEY (customer_id) REFERENCES customers(id)
);
Parent Table: The table being referenced (customers).Child Table: The table containing the foreign key (orders).4. Updating & Removing Foreign Key ConstraintsSometimes relationships need to change. Because constraints are "rules," you can't just change the data if it violates the rule.Dropping a ConstraintTo remove a constraint, you must know its name. If you didn't name it, MySQL generates one for you (e.g., orders_ibfk_1).SQLALTER TABLE orders DROP FOREIGN KEY orders_ibfk_1;
Adding a Constraint to an Existing TableSQLALTER TABLE orders
ADD CONSTRAINT fk_customer
FOREIGN KEY (customer_id) REFERENCES customers(id);
5. Foreign Key Constraints In ActionThe most critical part of FKs is how they handle Updates and Deletes. We use "Referential Actions" to tell MySQL what to do with the child record when the parent record is touched:ActionDescriptionCASCADEIf the parent row is deleted/updated, the child rows are automatically deleted/updated.SET NULLIf the parent row is deleted, the child's FK column is set to NULL.RESTRICT / NO ACTION(Default) Prevents the deletion or update of the parent row if a child exists.Example of Cascade:SQLFOREIGN KEY (customer_id) REFERENCES customers(id) ON DELETE CASCADE
6. REFERENCES & MySQLIn MySQL, the REFERENCES keyword is specifically used within the CREATE TABLE or ALTER TABLE statement to point to the parent table and its primary key.Note: For Foreign Key constraints to actually work in MySQL, you must use the InnoDB storage engine (which is the default for modern versions). Older engines like MyISAM will parse the syntax but silently ignore the actual enforcement of the rule!Summary Checklist[x] Identified why "loose" IDs are dangerous.[x] Wrote CREATE TABLE with FOREIGN KEY.[x] Practiced ON DELETE CASCADE.[x] Learned to DROP and ADD constraints via ALTER TABLE.